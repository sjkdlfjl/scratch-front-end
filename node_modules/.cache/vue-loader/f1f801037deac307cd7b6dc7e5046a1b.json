{"remainingRequest":"E:\\毕设\\vue-jsmind-main\\vue-jsmind-main\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\毕设\\vue-jsmind-main\\vue-jsmind-main\\src\\components\\Jsmind.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\毕设\\vue-jsmind-main\\vue-jsmind-main\\src\\components\\Jsmind.vue","mtime":1697979069057},{"path":"E:\\毕设\\vue-jsmind-main\\vue-jsmind-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1697458786430},{"path":"E:\\毕设\\vue-jsmind-main\\vue-jsmind-main\\node_modules\\babel-loader\\lib\\index.js","mtime":1697458788664},{"path":"E:\\毕设\\vue-jsmind-main\\vue-jsmind-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1697458786430},{"path":"E:\\毕设\\vue-jsmind-main\\vue-jsmind-main\\node_modules\\vue-loader\\lib\\index.js","mtime":1697458776746}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmNsYXNzIG5vZGUgewogIGNvbnN0cnVjdG9yKGF0KSB7CiAgICB0aGlzLnR5cGUgPSBhdAogICAgdGhpcy5ub2RlX2xpc3QgPSBuZXcgQXJyYXkoKQogIH0KfQpleHBvcnQgZGVmYXVsdCB7CiAgd2F0Y2g6IHsKICAgICd6b29tLnZhbHVlJyh2YWwpIHsKICAgICAgY29uc3Qgem9vbSA9IHZhbCAvIDEwMAogICAgICB0aGlzLmptLnZpZXcuc2V0Wm9vbSh6b29tKQogICAgfSwKICAgIHNlbGVjdFR5cGVzKHYpIHsKICAgICAgdGhpcy5sb29wVHJlZURhdGEodGhpcy5taW5kLmRhdGEuY2hpbGRyZW4sIChpdGVtKSA9PiB7CiAgICAgICAgaWYgKHYubGVuZ3RoKSB7CiAgICAgICAgICBpZiAodi5pbmNsdWRlcyhpdGVtLnR5cGUpKSB7CiAgICAgICAgICAgIHRoaXMuam0uc2V0X25vZGVfY29sb3IoaXRlbS5pZCwgdGhpcy5iZ01hcFtpdGVtLnR5cGVdLm9yaWdpbmFsLCAnI2ZmZicpCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLmptLnNldF9ub2RlX2NvbG9yKGl0ZW0uaWQsIHRoaXMuYmdNYXBbaXRlbS50eXBlXS50cmFuc3BhcmVudCwgJyNmZmYnKQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmptLnNldF9ub2RlX2NvbG9yKGl0ZW0uaWQsIHRoaXMuYmdNYXBbaXRlbS50eXBlXS50cmFuc3BhcmVudCwgJyNmZmYnKQogICAgICAgIH0KICAgICAgfSkKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBwYXRoQ29sb3IoKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiAodHlwZSkgewogICAgICAgIHJldHVybiB0aGlzLnN0cnVjdHVyZS5hY3RpdmUgPT09IHR5cGUgPyB0aGlzLnN0cnVjdHVyZS5wYXRoQWN0aXZlQ29sb3IgOiB0aGlzLnN0cnVjdHVyZS5wYXRoT3JnaW5hbENvbG9yCiAgICAgIH0KICAgIH0sCiAgICByZWN0Q29sb3IoKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiAodHlwZSkgewogICAgICAgIHJldHVybiB0aGlzLnN0cnVjdHVyZS5hY3RpdmUgPT09IHR5cGUgPyB0aGlzLnN0cnVjdHVyZS5yZWN0QWN0aXZlQ29sb3IgOiB0aGlzLnN0cnVjdHVyZS5yZWN0T3JnaW5hbENvbG9yCiAgICAgIH0KICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBub2RlX21hcDoge30sICAvL+WtmOaUvm5vZGUg5qCRCiAgICAgIG5vZGVfaWRfY291bnQ6IDEwMCwKICAgICAgbWluZDogewogICAgICAgIG1ldGE6IHsKICAgICAgICAgIG5hbWU6ICfmgJ3nu7Tlr7zlm74nLAogICAgICAgICAgYXV0aG9yOiAncGMnLAogICAgICAgICAgdmVyc2lvbjogJzAuMicKICAgICAgICB9LAogICAgICAgIGZvcm1hdDogJ25vZGVfdHJlZScsCiAgICAgICAgZGF0YTogewogICAgICAgICAgaWQ6ICdyb290JywKICAgICAgICAgIHRvcGljOiAnaW5wdXQnLAogICAgICAgICAgdHlwZTogJzEnLAogICAgICAgICAgZGlyZWN0aW9uOiAncmlnaHQnLAogICAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgICAgewogICAgICAgICAgICAgIGlkOiAnZWFzeScsIC8vIFvlv4XpgIldIElELCDmiYDmnInoioLngrnnmoRJROS4jeW6lOaciemHjeWkje+8jOWQpuWImUlE6YeN5aSN55qE57uT6IqC5bCG6KKr5b+955WlCiAgICAgICAgICAgICAgdG9waWM6ICdFYXN5JywgLy8gW+W/hemAiV0g6IqC54K55LiK5pi+56S655qE5YaF5a65CiAgICAgICAgICAgICAgZGlyZWN0aW9uOiAncmlnaHQnLCAvLyBb5Y+v6YCJXSDoioLngrnnmoTmlrnlkJHvvIzmraTmlbDmja7ku4XlnKjnrKzkuIDlsYLoioLngrnkuIrmnInmlYjvvIznm67liY3ku4XmlK/mjIEgbGVmdCDlkowgcmlnaHQg5Lik56eN77yM6buY6K6k5Li6IHJpZ2h0CiAgICAgICAgICAgICAgZXhwYW5kZWQ6IHRydWUsIC8vIFvlj6/pgIldIOivpeiKgueCueaYr+WQpuaYr+WxleW8gOeKtuaAge+8jOm7mOiupOS4uiB0cnVlCiAgICAgICAgICAgICAgdHlwZTogJzInLCAvLyBb5Y+v6YCJXeiHquWumuS5ieiKgueCueexu+WeiwogICAgICAgICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICAgICAgICB7IGlkOiAnZWFzeTEnLCB0b3BpYzogJ0Vhc3kgdG8gc2hvdycsIHR5cGU6ICczJyB9LAogICAgICAgICAgICAgICAgeyBpZDogJ2Vhc3kyJywgdG9waWM6ICdFYXN5IHRvIGVkaXQnLCB0eXBlOiAnMycgfSwKICAgICAgICAgICAgICAgIHsgaWQ6ICdlYXN5MycsIHRvcGljOiAnRWFzeSB0byBzdG9yZScsIHR5cGU6ICczJyB9LAogICAgICAgICAgICAgICAgeyBpZDogJ2Vhc3k0JywgdG9waWM6ICdFYXN5IHRvIGVtYmVkJywgdHlwZTogJzMnIH0KICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBpZDogJ29wZW4nLAogICAgICAgICAgICAgIHRvcGljOiAnT3BlbiBTb3VyY2UnLAogICAgICAgICAgICAgIGRpcmVjdGlvbjogJ3JpZ2h0JywKICAgICAgICAgICAgICBleHBhbmRlZDogdHJ1ZSwKICAgICAgICAgICAgICB0eXBlOiAnMicsCiAgICAgICAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgICAgICAgIHsgaWQ6ICdvcGVuMScsIHRvcGljOiAnb24gR2l0SHViJywgdHlwZTogJzMnIH0sCiAgICAgICAgICAgICAgICB7IGlkOiAnb3BlbjInLCB0b3BpYzogJ0JTRCBMaWNlbnNlJywgdHlwZTogJzMnIH0KICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBpZDogJ3Bvd2VyZnVsJywKICAgICAgICAgICAgICB0b3BpYzogJ1Bvd2VyZnVsJywKICAgICAgICAgICAgICBkaXJlY3Rpb246ICdyaWdodCcsCiAgICAgICAgICAgICAgdHlwZTogJzInLAogICAgICAgICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICAgICAgICB7IGlkOiAncG93ZXJmdWwxJywgdG9waWM6ICdCYXNlIG9uIEphdmFzY3JpcHQnLCB0eXBlOiAnMycgfSwKICAgICAgICAgICAgICAgIHsgaWQ6ICdwb3dlcmZ1bDInLCB0b3BpYzogJ0Jhc2Ugb24gSFRNTDUnLCB0eXBlOiAnMycgfSwKICAgICAgICAgICAgICAgIHsgaWQ6ICdwb3dlcmZ1bDMnLCB0b3BpYzogJ0RlcGVuZHMgb24geW91JywgdHlwZTogJzMnIH0KICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBpZDogJ290aGVyJywKICAgICAgICAgICAgICB0b3BpYzogJ3Rlc3Qgbm9kZScsCiAgICAgICAgICAgICAgZGlyZWN0aW9uOiAncmlnaHQnLAogICAgICAgICAgICAgIHR5cGU6ICcyJywKICAgICAgICAgICAgICBjaGlsZHJlbjogWwogICAgICAgICAgICAgICAgeyBpZDogJ290aGVyMScsIHRvcGljOiAiSSdtIGZyb20gbG9jYWwgdmFyaWFibGUiLCB0eXBlOiAnMycgfSwKICAgICAgICAgICAgICAgIHsgaWQ6ICdvdGhlcjInLCB0b3BpYzogJ0kgY2FuIGRvIGV2ZXJ5dGhpbmcnLCB0eXBlOiAnMycgfQogICAgICAgICAgICAgIF0KICAgICAgICAgICAgfQogICAgICAgICAgXQogICAgICAgIH0KICAgICAgfSwKICAgICAgb3B0aW9uczogewogICAgICAgIGNvbnRhaW5lcjogJ2pzbWluZF9jb250YWluZXInLCAvLyBb5b+F6YCJXSDlrrnlmajnmoRJRAogICAgICAgIGVkaXRhYmxlOiB0cnVlLCAvLyBb5Y+v6YCJXSDmmK/lkKblkK/nlKjnvJbovpEKICAgICAgICB0aGVtZTogJycsIC8vIFvlj6/pgIldIOS4u+mimAogICAgICAgIHZpZXc6IHsKICAgICAgICAgIGVuZ2luZTogJ2NhbnZhcycsIC8vIOaAnee7tOWvvOWbvuWQhOiKgueCueS5i+mXtOe6v+adoeeahOe7mOWItuW8leaTjgogICAgICAgICAgaG1hcmdpbjogMTIwLCAvLyDmgJ3nu7Tlr7zlm77ot53lrrnlmajlpJbmoYbnmoTmnIDlsI/msLTlubPot53nprsKICAgICAgICAgIHZtYXJnaW46IDUwLCAvLyDmgJ3nu7Tlr7zlm77ot53lrrnlmajlpJbmoYbnmoTmnIDlsI/lnoLnm7Tot53nprsKICAgICAgICAgIGxpbmVfd2lkdGg6IDIsIC8vIOaAnee7tOWvvOWbvue6v+adoeeahOeyl+e7hgogICAgICAgICAgbGluZV9jb2xvcjogJyNkZGQnIC8vIOaAnee7tOWvvOWbvue6v+adoeeahOminOiJsgogICAgICAgIH0sCiAgICAgICAgbGF5b3V0OiB7CiAgICAgICAgICBoc3BhY2U6IDEwMCwgLy8g6IqC54K55LmL6Ze055qE5rC05bmz6Ze06LedCiAgICAgICAgICB2c3BhY2U6IDIwLCAvLyDoioLngrnkuYvpl7TnmoTlnoLnm7Tpl7Tot50KICAgICAgICAgIHBzcGFjZTogMjAgLy8g6IqC54K55LiO6L+e5o6l57q/5LmL6Ze055qE5rC05bmz6Ze06Led77yI55So5LqO5a6557qz6IqC54K55pS257ypL+WxleW8gOaOp+WItuWZqO+8iQogICAgICAgIH0sCiAgICAgICAgc2hvcnRjdXQ6IHsgLy8g56aB55So5b+r5o236ZSuCiAgICAgICAgICBlbmFibGU6IGZhbHNlCiAgICAgICAgfQogICAgICB9LAogICAgICB6b29tOiB7CiAgICAgICAgdmFsdWU6IDEwMCwgLy8g5bGC57qn5aSn5bCPCiAgICAgICAgbWluOiAxMCwgLy8g5pyA5bCP5bGC57qnCiAgICAgICAgbWF4OiA0MDAgLy8g5pyA5aSn5bGC57qnCiAgICAgIH0sCiAgICAgIGJnTWFwOiB7CiAgICAgICAgMTogewogICAgICAgICAgb3JpZ2luYWw6ICdyZ2IoMjUxLCAxNTEsIDIwMCknLAogICAgICAgICAgdHJhbnNwYXJlbnQ6ICdyZ2IoMjUxLCAxNTEsIDIwMCwgMC4yKScKCiAgICAgICAgfSwKICAgICAgICAyOiB7CiAgICAgICAgICBvcmlnaW5hbDogJ3JnYigxMDAsIDIwMSwgNTMpJywKICAgICAgICAgIHRyYW5zcGFyZW50OiAncmdiKDEwMCwgMjAxLCA1MywgMC4yKScKICAgICAgICB9LAogICAgICAgIDM6IHsKICAgICAgICAgIG9yaWdpbmFsOiAncmdiKDY3LCA1MCwgMTczKScsCiAgICAgICAgICB0cmFuc3BhcmVudDogJ3JnYig2NywgNTAsIDE3MywgMC4yKScKICAgICAgICB9LAogICAgICAgIDQ6IHsKICAgICAgICAgIG9yaWdpbmFsOiAncmdiKDI1LCAxNDQsIDI1NSknLAogICAgICAgICAgdHJhbnNwYXJlbnQ6ICdyZ2IoMjUsIDE0NCwgMjU1LCAwLjIpJwogICAgICAgIH0sCiAgICAgICAgNTogewogICAgICAgICAgb3JpZ2luYWw6ICdyZ2IoMjEyLCA0MiwgNDIpJywKICAgICAgICAgIHRyYW5zcGFyZW50OiAncmdiKDIxMiwgNDIsIDQyLCAwLjIpJwogICAgICAgIH0KICAgICAgfSwKICAgICAgc3RydWN0dXJlOiB7CiAgICAgICAgYWN0aXZlOiAncmlnaHQnLAogICAgICAgIHBhdGhPcmdpbmFsQ29sb3I6ICcjMkIyRjM2JywKICAgICAgICBwYXRoQWN0aXZlQ29sb3I6ICcjMzM3MEZGJywKICAgICAgICByZWN0T3JnaW5hbENvbG9yOiAnI0MzQzZDQicsCiAgICAgICAgcmVjdEFjdGl2ZUNvbG9yOiAnI0JBQ0VGRCcKICAgICAgfSwKICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIHNlbGVjdE5vZGVJbmZvOiB7CiAgICAgICAgaWQ6IG51bGwsCiAgICAgICAgTmFtZTogJycKICAgICAgfSwgLy8g6YCJ5Lit6IqC54K55L+h5oGvCiAgICAgIHRlbXBOb2RlSW5mbzogbnVsbCwgLy8g5L+d5a2Y5L+u5pS55LmL5YmN55qE5L+h5oGvCiAgICAgIGNyZWF0ZVR5cGU6ICcnLCAvLyDmt7vliqDlubPnuqdvcuWtkOe6pwogICAgICBzaG93TWVudTogZmFsc2UsIC8vIOaYr+WQpuaYvuekuuWPs+mUruiPnOWNleagjwogICAgICBtZW51U3R5bGU6IHsKICAgICAgICB0b3A6ICcnLAogICAgICAgIGJvdHRvbTogJycsCiAgICAgICAgbGVmdDogJycsCiAgICAgICAgcmlnaHQ6ICcnCiAgICAgIH0sCiAgICAgIGZpbHRlclR5cGVzOiBbCiAgICAgICAgewogICAgICAgICAgdHlwZTogJ3InLAogICAgICAgICAgdmFsdWU6ICcxJywKICAgICAgICAgIG5hbWU6ICdSb290JywKICAgICAgICAgIHN0YXR1czogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdHlwZTogJ28nLAogICAgICAgICAgdmFsdWU6ICcyJywKICAgICAgICAgIG5hbWU6ICdPYmplY3QnLAogICAgICAgICAgc3RhdHVzOiB0cnVlCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0eXBlOiAna3MnLAogICAgICAgICAgdmFsdWU6ICczJywKICAgICAgICAgIG5hbWU6ICdLZXkgU3RlcHMnLAogICAgICAgICAgc3RhdHVzOiB0cnVlCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0eXBlOiAncCcsCiAgICAgICAgICB2YWx1ZTogJzQnLAogICAgICAgICAgbmFtZTogJ1Byb2dyYW1taW5nJywKICAgICAgICAgIHN0YXR1czogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdHlwZTogJ2MnLAogICAgICAgICAgdmFsdWU6ICc1JywKICAgICAgICAgIG5hbWU6ICdjb2RlJywKICAgICAgICAgIHN0YXR1czogdHJ1ZQogICAgICAgIH0KICAgICAgXSwKICAgICAgdHlwZVF1ZXVlOiBuZXcgU2V0KFsnMScsICcyJywgJzMnLCAnNCcsICc1J10pLCAvLyDpgInkuK10eXBlcyBTZXQKICAgICAgc2VsZWN0VHlwZXM6IFsnMScsICcyJywgJzMnLCAnNCcsICc1J10gLy8g6YCJ5LitdHlwZXMgQXJyYXkKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOetm+mAieagkee7k+aehAogICAgdG9nZ2xlRmlsdGVyKGl0ZW0pIHsKICAgICAgaXRlbS5zdGF0dXMgPSAhaXRlbS5zdGF0dXMKICAgICAgaXRlbS5zdGF0dXMgPyB0aGlzLnR5cGVRdWV1ZS5hZGQoaXRlbS52YWx1ZSkgOiB0aGlzLnR5cGVRdWV1ZS5kZWxldGUoaXRlbS52YWx1ZSkKICAgICAgdGhpcy5zZWxlY3RUeXBlcyA9IFsuLi50aGlzLnR5cGVRdWV1ZV0KICAgIH0sCgogICAgLy8g6YeN572u6KeG5Zu+CiAgICByZXNldCgpIHsKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJvb3QnKS5zY3JvbGxJbnRvVmlldyh7CiAgICAgICAgYmxvY2s6ICdjZW50ZXInLAogICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJwogICAgICB9KQogICAgfSwKCiAgICAvLyDnvKnlsI8KICAgIHpvb21PdXQoKSB7CiAgICAgIHRoaXMuam0udmlldy56b29tT3V0KCkKICAgICAgdGhpcy56b29tLnZhbHVlID0gcGFyc2VJbnQodGhpcy5qbS52aWV3LmFjdHVhbFpvb20gKiAxMDApCiAgICB9LAogICAgLy8g5pS+5aSnCiAgICB6b29tSW4oKSB7CiAgICAgIHRoaXMuam0udmlldy56b29tSW4oKQogICAgICB0aGlzLnpvb20udmFsdWUgPSBwYXJzZUludCh0aGlzLmptLnZpZXcuYWN0dWFsWm9vbSAqIDEwMCkKICAgIH0sCgogICAgLy8g5b6q546v5qCR57uT5p6ECiAgICBsb29wVHJlZURhdGEobGlzdCwgY2FsbGJhY2spIHsKICAgICAgKGZ1bmN0aW9uIGRvT25lRmxvb3IobGlzdCkgewogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGxpc3QpKSB7CiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgY29uc3QgaXRlbSA9IGxpc3RbaV0KICAgICAgICAgICAgY2FsbGJhY2soaXRlbSwgaSkKICAgICAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4gJiYgaXRlbS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgZG9PbmVGbG9vcihpdGVtLmNoaWxkcmVuKQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KShsaXN0KQogICAgfSwKCiAgICAvLyDorr7nva7og4zmma/popzoibIKICAgIHNldENvbG9yKCkgewogICAgICB0aGlzLmptLnNldF9ub2RlX2NvbG9yKCdyb290JywgdGhpcy5iZ01hcFsxXS5vcmlnaW5hbCwgJyNmZmYnKQogICAgICB0aGlzLmxvb3BUcmVlRGF0YSh0aGlzLm1pbmQuZGF0YS5jaGlsZHJlbiwgKGl0ZW0pID0+IHsKICAgICAgICBpZiAodGhpcy5zZWxlY3RUeXBlcy5sZW5ndGgpIHsKICAgICAgICAgIGlmICh0aGlzLnNlbGVjdFR5cGVzLmluY2x1ZGVzKGl0ZW0udHlwZSkpIHsKICAgICAgICAgICAgdGhpcy5qbS5zZXRfbm9kZV9jb2xvcihpdGVtLmlkLCB0aGlzLmJnTWFwW2l0ZW0udHlwZV0ub3JpZ2luYWwsICcjZmZmJykKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuam0uc2V0X25vZGVfY29sb3IoaXRlbS5pZCwgdGhpcy5iZ01hcFtpdGVtLnR5cGVdLnRyYW5zcGFyZW50LCAnI2ZmZicpCiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuam0uc2V0X25vZGVfY29sb3IoaXRlbS5pZCwgdGhpcy5iZ01hcFtpdGVtLnR5cGVdLnRyYW5zcGFyZW50LCAnI2ZmZicpCiAgICAgICAgfQogICAgICB9KQogICAgfSwKCiAgICAvLyDliIfmjaLmgJ3nu7Tlr7zlm77nu5PmnoQKICAgIHRvZ2dsZVN0dWN0dXJlKHR5cGUpIHsKICAgICAgaWYgKHRoaXMuc3RydWN0dXJlLmFjdGl2ZSA9PT0gdHlwZSkgcmV0dXJuCiAgICAgIHRoaXMuc3RydWN0dXJlLmFjdGl2ZSA9ICdyaWdodCcKICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgY2FzZSAnc2lkZSc6CiAgICAgICAgICAvLyDkuKTovrnliIbluIMKICAgICAgICAgIHRoaXMubG9vcFRyZWVEYXRhKHRoaXMubWluZC5kYXRhLmNoaWxkcmVuLCAoaXRlbSwgaSkgPT4geyBpdGVtLmRpcmVjdGlvbiA9IGkgJSAyID8gJ2xlZnQnIDogJ3JpZ2h0JyB9KQogICAgICAgICAgYnJlYWsKCiAgICAgICAgY2FzZSAnbGVmdCc6CiAgICAgICAgICAvLyDlkJHlt6bliIbluIMKICAgICAgICAgIHRoaXMubG9vcFRyZWVEYXRhKHRoaXMubWluZC5kYXRhLmNoaWxkcmVuLCAoaXRlbSkgPT4geyBpdGVtLmRpcmVjdGlvbiA9ICdsZWZ0JyB9KQogICAgICAgICAgYnJlYWsKCiAgICAgICAgY2FzZSAncmlnaHQnOgogICAgICAgICAgLy8g5ZCR5Y+z5YiG5biDCiAgICAgICAgICB0aGlzLmxvb3BUcmVlRGF0YSh0aGlzLm1pbmQuZGF0YS5jaGlsZHJlbiwgKGl0ZW0pID0+IHsgaXRlbS5kaXJlY3Rpb24gPSAncmlnaHQnIH0pCiAgICAgICAgICBicmVhawoKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgYnJlYWsKICAgICAgfQoKICAgICAgdGhpcy5qbS5zaG93KHRoaXMubWluZCkKICAgICAgdGhpcy5pbml0KCkKICAgIH0sCgogICAgLy8g5Yid5aeL5YyW6YWN572uCiAgICBpbml0KCkgewoKICAgICAgdGhpcy5qbS52aWV3Lm1pblpvb20gPSAwLjEKICAgICAgdGhpcy5qbS52aWV3Lm1heFpvb20gPSA1CiAgICAgIHRoaXMuam0uZXhwYW5kX2FsbCgpCiAgICAgIHRoaXMuc2V0Q29sb3IoKQoKICAgICAgLy8g6YeN5YaZ57yW6L6R5a6M5oiQ5LqL5Lu2CiAgICAgIHRoaXMuam0udmlldy5lZGl0X25vZGVfZW5kID0gKCkgPT4gewogICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLmptLnZpZXcuZ2V0X2VkaXRpbmdfbm9kZSgpCiAgICAgICAgY29uc3Qgdmlld0RhdGEgPSBub2RlLl9kYXRhLnZpZXcKICAgICAgICBjb25zdCBlbGVtZW50ID0gdmlld0RhdGEuZWxlbWVudAogICAgICAgIGVsZW1lbnQuc3R5bGUuekluZGV4ID0gJ2F1dG8nCiAgICAgICAgaWYgKG5vZGUudG9waWMgPT09IHRoaXMuZWRpdG9yLnZhbHVlKSB7CiAgICAgICAgICB0aGlzLmptLnVwZGF0ZV9ub2RlKG5vZGUuaWQsIG5vZGUudG9waWMpCiAgICAgICAgICByZXR1cm4KICAgICAgICB9CiAgICAgICAgbm9kZS50b3BpYyA9IHRoaXMuZWRpdG9yLnZhbHVlCiAgICAgICAgaWYgKCFub2RlLnRvcGljKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmluZm8oJ3BsZWFzZSBpbnB1dCBjb250ZW50JykKICAgICAgICB9CiAgICAgICAgdGhpcy5qbS51cGRhdGVfbm9kZShub2RlLmlkLCBub2RlLnRvcGljKQoKICAgICAgICAvLyBUT0RPIOiwg+aOpeWPowogICAgICB9CgogICAgICAvLyDlj7PplK7oj5zljZUKICAgICAgdGhpcy5qbS52aWV3LmFkZF9ldmVudCh0aGlzLmVkaXRvciwgJ2NvbnRleHRtZW51JywgKGUpID0+IHsKICAgICAgICBjb25zdCBzZWxlY3RlZE5vZGUgPSB0aGlzLmptLmdldF9zZWxlY3RlZF9ub2RlKCkKICAgICAgICBjb25zb2xlLmxvZygic2VsZWN0Tm9kZToiICsgc2VsZWN0ZWROb2RlLmRhdGEudHlwZSkKICAgICAgICAvLyYmIHNlbGVjdGVkTm9kZS5kYXRhLnR5cGUKICAgICAgICBpZiAoc2VsZWN0ZWROb2RlKSB7CiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCkKICAgICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRleHQtbWVudSAuZWwtbWVudS1pdGVtJykKICAgICAgICAgIGNvbnN0IHdpZHRoID0gcGFyc2VGbG9hdCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShlbCkud2lkdGgpCiAgICAgICAgICBjb25zdCBoZWlnaHQgPSBwYXJzZUZsb2F0KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsKS5oZWlnaHQpICogMyArIDEyCiAgICAgICAgICBjb25zdCB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQKICAgICAgICAgIGNvbnN0IHdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGgKCiAgICAgICAgICAvLyDmnoHpmZDkvY3nva4g6YG/5YWN6LaK55WMCiAgICAgICAgICBpZiAoZS5jbGllbnRZICsgaGVpZ2h0ID4gd2luZG93SGVpZ2h0KSB7CiAgICAgICAgICAgIHRoaXMubWVudVN0eWxlLmxlZnQgPSBlLmNsaWVudFggKyAncHgnCiAgICAgICAgICAgIHRoaXMubWVudVN0eWxlLnRvcCA9ICd1bnNldCcKICAgICAgICAgICAgdGhpcy5tZW51U3R5bGUuYm90dG9tID0gMAogICAgICAgICAgfSBlbHNlIGlmIChlLmNsaWVudFggKyB3aWR0aCA+IHdpbmRvd1dpZHRoKSB7CiAgICAgICAgICAgIHRoaXMubWVudVN0eWxlLnRvcCA9IGUuY2xpZW50WSArICdweCcKICAgICAgICAgICAgdGhpcy5tZW51U3R5bGUubGVmdCA9ICd1bnNldCcKICAgICAgICAgICAgdGhpcy5tZW51U3R5bGUucmlnaHQgPSAwCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLm1lbnVTdHlsZS5sZWZ0ID0gZS5jbGllbnRYICsgJ3B4JwogICAgICAgICAgICB0aGlzLm1lbnVTdHlsZS50b3AgPSBlLmNsaWVudFkgKyAncHgnCiAgICAgICAgICAgIHRoaXMubWVudVN0eWxlLmJvdHRvbSA9ICd1bnNldCcKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuc2hvd01lbnUgPSB0cnVlCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc2hvd01lbnUgPSBmYWxzZQogICAgICAgIH0KICAgICAgfSkKICAgICAgdGhpcy5ub2RlX21hcCA9IG5ldyBNYXAoW1tdXSk7CiAgICAgIHZhciByb290ID0gdGhpcy5qbS5nZXRfcm9vdCgpOwogICAgICB2YXIgcm9vdF9ub2RlID0gbmV3IG5vZGUoMSk7CiAgICAgIHRoaXMubm9kZV9tYXAuc2V0KHJvb3QuaWQsIHJvb3Rfbm9kZSk7CiAgICB9LAogICAgLy8g6I635Y+W6YCJ5Lit5qCH562+55qEIElECiAgICBnZXRfc2VsZWN0ZWRfbm9kZWlkKCkgewogICAgICBjb25zdCBzZWxlY3RlZE5vZGUgPSB0aGlzLmptLmdldF9zZWxlY3RlZF9ub2RlKCkKICAgICAgaWYgKHNlbGVjdGVkTm9kZSkgewogICAgICAgIHJldHVybiBzZWxlY3RlZE5vZGUuaWQKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbnVsbAogICAgICB9CiAgICB9LAoKICAgIC8vIOS/neWtmOiKgueCuQogICAgc3VyZUVkaXROb2RlKCkgewogICAgICBpZiAoIXRoaXMuc2VsZWN0Tm9kZUluZm8uTmFtZSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbygncGxlYXNlIGlucHV0IGNvbnRlbnQnKQogICAgICAgIHJldHVybgogICAgICB9CgogICAgICBpZiAodGhpcy5jcmVhdGVUeXBlID09PSAnYnJvJykgewogICAgICAgIC8vIOW5s+e6pwogICAgICAgIC8vIFRPRE8gCiAgICAgICAgLy8gY29uc3Qgc2VsZWN0ZWROb2RlID0gdGhpcy5qbS5nZXRfc2VsZWN0ZWRfbm9kZSgpCiAgICAgICAgLy8gY29uc3Qgc2VsZWN0ZWROb2RlX2lkID0gc2VsZWN0ZWROb2RlLmlkCiAgICAgICAgLy8gdGhpcy5qbS5hZGRfbm9kZShzZWxlY3RlZE5vZGUsICsrdGhpcy5ub2RlX2lkX2NvdW50LCB0aGlzLnNlbGVjdE5vZGVJbmZvLk5hbWUpCiAgICAgICAgLy8gLy8gdmFyIGN1cl90eXBlID0gdGhpcy5ub2RlX21hcC5nZXQoc2VsZWN0ZWROb2RlX2lkKS50eXBlCiAgICAgICAgLy8gdmFyIGN1cl90eXBlID0gMwogICAgICAgIC8vIHRoaXMuam0uc2V0X25vZGVfY29sb3IodGhpcy5ub2RlX2lkX2NvdW50LCB0aGlzLmJnTWFwW2N1cl90eXBlICsgMV0ub3JpZ2luYWwsICcjZmZmJykKICAgICAgICAvLyB2YXIgbmV3X25vZGUgPSBuZXcgbm9kZShjdXJfdHlwZSArIDEpCiAgICAgICAgLy8gdGhpcy5tYXAuYWRkKHRoaXMubm9kZV9pZF9jb3VudCwgbmV3X25vZGUpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5a2Q57qnCiAgICAgICAgLy8gVE9ETyAKICAgICAgICBjb25zdCBzZWxlY3RlZE5vZGUgPSB0aGlzLmptLmdldF9zZWxlY3RlZF9ub2RlKCkKICAgICAgICBjb25zdCBzZWxlY3RlZE5vZGVfaWQgPSBzZWxlY3RlZE5vZGUuaWQKICAgICAgICB0aGlzLmptLmFkZF9ub2RlKHNlbGVjdGVkTm9kZSwgKyt0aGlzLm5vZGVfaWRfY291bnQsIHRoaXMuc2VsZWN0Tm9kZUluZm8uTmFtZSwgbnVsbCwgJ3JpZ2h0JykKICAgICAgICBpZiAodGhpcy5ub2RlX21hcC5nZXQoc2VsZWN0ZWROb2RlX2lkKSkgewogICAgICAgICAgbGV0IGN1cl90eXBlID0gdGhpcy5ub2RlX21hcC5nZXQoc2VsZWN0ZWROb2RlX2lkKS50eXBlCiAgICAgICAgICAvLyB2YXIgY3VyX3R5cGUgPSAzCiAgICAgICAgICBjb25zb2xlLmxvZygiY3VydHlwZToiICsgdGhpcy5ub2RlX21hcC5nZXQoc2VsZWN0ZWROb2RlX2lkKSkKICAgICAgICB9CiAgICAgICAgLy8gbGV0IGN1cl90eXBlID0gdGhpcy5ub2RlX21hcC5nZXQoc2VsZWN0ZWROb2RlX2lkKS50eXBlCiAgICAgICAgY3VyX3R5cGUgPSAzCiAgICAgICAgdGhpcy5qbS5zZXRfbm9kZV9jb2xvcih0aGlzLm5vZGVfaWRfY291bnQsIHRoaXMuYmdNYXBbY3VyX3R5cGUgKyAxXS5vcmlnaW5hbCwgJyNmZmYnKQogICAgICAgIHZhciBuZXdfbm9kZSA9IG5ldyBub2RlKGN1cl90eXBlICsgMSkKICAgICAgICB0aGlzLm5vZGVfbWFwLnNldCh0aGlzLm5vZGVfaWRfY291bnQsIG5ld19ub2RlKQogICAgICB9CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlCiAgICB9LAoKICAgIC8vIOaLluaLvQogICAgaGFuZGxlRHJvcChkcmFnZ2luZ05vZGUsIGRyb3BOb2RlKSB7CiAgICAgIC8vIOWJjeS4gOS4quWFhOW8n+iKgueCuQogICAgICBjb25zdCBwcmV2Tm9kZSA9IHRoaXMuam0uZmluZF9ub2RlX2JlZm9yZShkcm9wTm9kZSkKICAgICAgLy8g6I635Y+W56e75Yqo5ZCO55qEbm9kZQogICAgICBjb25zdCBkcmFnRm9ybSA9IHsKICAgICAgICBtb2RlbElkOiAnJywKICAgICAgICB0cmVlTnVtOiAhcHJldk5vZGUgPyBkcmFnZ2luZ05vZGUgOiBwcmV2Tm9kZS5pZCwKICAgICAgICB0aGlzVHJlZU51bTogZHJvcE5vZGUKICAgICAgfQogICAgICBjb25zb2xlLmxvZygnZHJhZ0Zvcm0nLCBkcmFnRm9ybSkKCiAgICAgIC8vIFRPRE8g6LCD5o6l5Y+jCiAgICB9LAogICAgLy8g5Y2V5Ye76YeN572u6YCJ5Lit6IOM5pmv6aKc6ImyCiAgICBub2RlQ2xpY2soKSB7CiAgICAgIGNvbnN0IHNlbGVjdGVkSWQgPSB0aGlzLmdldF9zZWxlY3RlZF9ub2RlaWQoKQogICAgICBpZiAoIXNlbGVjdGVkSWQpIHJldHVybgogICAgICBjb25zdCBub2RlT2JqID0gdGhpcy5qbS5nZXRfbm9kZShzZWxlY3RlZElkKQogICAgICB0aGlzLmptLnNldF9ub2RlX2NvbG9yKHNlbGVjdGVkSWQsIG5vZGVPYmouZGF0YVsnYmFja2dyb3VuZC1jb2xvciddLCAnI2ZmZicpCiAgICB9LAoKICAgIC8vIOaPkuWFpeWNoeeJhwogICAgaW5zZXJ0Tm9kZSgpIHsKICAgICAgY29uc3Qgc2VsZWN0ZWROb2RlID0gdGhpcy5qbS5nZXRfc2VsZWN0ZWRfbm9kZSgpCiAgICAgIGlmIChzZWxlY3RlZE5vZGUuZGF0YSkgewogICAgICAgIHRoaXMuJGVtaXQoJ2luc2VydCcsIHNlbGVjdGVkTm9kZS5kYXRhKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ3BsZWFzZSBzZWxlY3Qgb25lIG5vZGUnKQogICAgICB9CiAgICAgIHRoaXMuc2hvd01lbnUgPSBmYWxzZQogICAgfSwKICAgIC8vIOaPkuWFpeW5s+e6pwogICAgYWRkQnJvdGhlcigpIHsKICAgICAgY29uc3Qgc2VsZWN0ZWROb2RlID0gdGhpcy5qbS5nZXRfc2VsZWN0ZWRfbm9kZSgpCiAgICAgIGlmIChzZWxlY3RlZE5vZGUuZGF0YSkgewogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUKICAgICAgICB0aGlzLnNlbGVjdE5vZGVJbmZvID0gewogICAgICAgICAgaWQ6IHNlbGVjdGVkTm9kZS5kYXRhLm51bSwKICAgICAgICAgIE5hbWU6ICcnCiAgICAgICAgfQogICAgICAgIHRoaXMuY3JlYXRlVHlwZSA9ICdicm8nCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigncGxlYXNlIHNlbGVjdCBvbmUgbm9kZScpCiAgICAgIH0KCiAgICAgIHRoaXMuc2hvd01lbnUgPSBmYWxzZQogICAgfSwKCiAgICAvLyDmj5LlhaXlrZDnuqcKICAgIGFkZENoaWxkKCkgewogICAgICBjb25zdCBzZWxlY3RlZE5vZGUgPSB0aGlzLmptLmdldF9zZWxlY3RlZF9ub2RlKCkKICAgICAgaWYgKHNlbGVjdGVkTm9kZS5kYXRhKSB7CiAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZQogICAgICAgIHRoaXMuc2VsZWN0Tm9kZUluZm8gPSB7CiAgICAgICAgICBpZDogc2VsZWN0ZWROb2RlLmRhdGEubnVtLAogICAgICAgICAgTmFtZTogJycKICAgICAgICB9CiAgICAgICAgdGhpcy5jcmVhdGVUeXBlID0gJ2NoaWxkJwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ3BsZWFzZSBzZWxlY3Qgb25lIG5vZGUnKQogICAgICB9CgogICAgICB0aGlzLnNob3dNZW51ID0gZmFsc2UKICAgIH0sCgogICAgLy8g5Yig6Zmk5Y2h54mHCiAgICBkZWxDYXJkKCkgewogICAgICBjb25zdCBzZWxlY3RlZE5vZGUgPSB0aGlzLmptLmdldF9zZWxlY3RlZF9ub2RlKCkKICAgICAgaWYgKHNlbGVjdGVkTm9kZS5kYXRhKSB7CiAgICAgICAgLy8gVE9ETwogICAgICAgIHRoaXMuam0ucmVtb3ZlX25vZGUoc2VsZWN0ZWROb2RlLmlkKQogICAgICAgIC8vIOiOt+WPluaVsOaNrgogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuam0uZ2V0X2RhdGEoJ25vZGVfdHJlZScpKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ3BsZWFzZSBzZWxlY3Qgb25lIG5vZGUnKQogICAgICB9CiAgICAgIHRoaXMuc2hvd01lbnUgPSBmYWxzZQogICAgfSwKCiAgICAvLyDpvKDmoIfmu5rova7mlL7lpKfnvKnlsI8KICAgIG1vdXNlV2hlZWwoKSB7CiAgICAgIGlmIChkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKSB7CiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZG9tTW91c2VTY3JvbGwnLCB0aGlzLnNjcm9sbEZ1bmMsIGZhbHNlKQogICAgICB9CiAgICAgIHRoaXMuJHJlZnMuY29udGFpbmVyLm9ubW91c2V3aGVlbCA9IHRoaXMuc2Nyb2xsRnVuYwogICAgfSwKICAgIC8vIOa7mui9rue8qeaUvgogICAgc2Nyb2xsRnVuYyhlKSB7CiAgICAgIGUgPSBlIHx8IHdpbmRvdy5ldmVudAogICAgICBpZiAoZS53aGVlbERlbHRhKSB7CiAgICAgICAgaWYgKGUud2hlZWxEZWx0YSA+IDApIHsKICAgICAgICAgIHRoaXMuem9vbUluKCkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy56b29tT3V0KCkKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZS5kZXRhaWwpIHsKICAgICAgICBpZiAoZS5kZXRhaWwgPiAwKSB7CiAgICAgICAgICB0aGlzLnpvb21JbigpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuem9vbU91dCgpCiAgICAgICAgfQogICAgICB9CiAgICAgIGUucHJldmVudERlZmF1bHQoKQogICAgICB0aGlzLmptLnJlc2l6ZSgpCiAgICB9LAoKICAgIC8vIOWvvOWHuuWbvueJhwogICAgc2NyZWVuX3Nob3QoKSB7CiAgICAgIC8vIOWOu+mZpOmAj+aYjuW6pgogICAgICB0aGlzLmxvb3BUcmVlRGF0YSh0aGlzLm1pbmQuZGF0YS5jaGlsZHJlbiwgKGl0ZW0pID0+IHRoaXMuam0uc2V0X25vZGVfY29sb3IoaXRlbS5pZCwgdGhpcy5iZ01hcFtpdGVtLnR5cGVdLm9yaWdpbmFsLCAnI2ZmZicpKQogICAgICB0cnkgewogICAgICAgIHRoaXMuam0uc2NyZWVuc2hvdC5zaG9vdERvd25sb2FkKCkKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikKICAgICAgfQogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLnNldENvbG9yKCkKICAgICAgfSwgMTAwMCkKICAgIH0sCiAgICAvLyDpvKDmoIfmi5bmi70KICAgIG1vdXNlRHJhZygpIHsKICAgICAgLy8g6YeM5bGCCiAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzbWluZC1pbm5lcicpCiAgICAgIC8vIOmAieS4reiKgueCuQogICAgICBsZXQgc2VsZWN0ZWQKCiAgICAgIGVsLm9ubW91c2Vkb3duID0gKGV2KSA9PiB7CiAgICAgICAgLy8g6YCJ5Lit6IqC54K5CiAgICAgICAgc2VsZWN0ZWQgPSB0aGlzLmptLmdldF9zZWxlY3RlZF9ub2RlKCkKICAgICAgICAvLyDmoIfor4Yg5piv5ZCm5ouW5ou96IqC54K5IOmBv+WFjeWGsueqgQogICAgICAgIHRoaXMuZHJhZ05vZGVGbGFnID0gISFzZWxlY3RlZAoKICAgICAgICBjb25zdCBkaXNYID0gZXYuY2xpZW50WAogICAgICAgIGNvbnN0IGRpc1kgPSBldi5jbGllbnRZCiAgICAgICAgY29uc3Qgb3JpZ2luYWxTY3JvbGxMZWZ0ID0gZWwuc2Nyb2xsTGVmdAogICAgICAgIGNvbnN0IG9yaWdpbmFsU2Nyb2xsVG9wID0gZWwuc2Nyb2xsVG9wCiAgICAgICAgY29uc3Qgb3JpZ2luYWxTY3JvbGxCZWhhdmlvciA9IGVsLnN0eWxlWydzY3JvbGwtYmVoYXZpb3InXQogICAgICAgIGNvbnN0IG9yaWdpbmFsUG9pbnRlckV2ZW50cyA9IGVsLnN0eWxlWydwb2ludGVyLWV2ZW50cyddCiAgICAgICAgLy8gYXV0bzog6buY6K6k5YC877yM6KGo56S65rua5Yqo5qGG56uL5Y2z5rua5Yqo5Yiw5oyH5a6a5L2N572u44CCCiAgICAgICAgZWwuc3R5bGVbJ3Njcm9sbC1iZWhhdmlvciddID0gJ2F1dG8nCiAgICAgICAgLy8g6byg5qCH56e75Yqo5LqL5Lu25piv55uR5ZCs55qE5pW05LiqZG9jdW1lbnTvvIzov5nmoLflj6/ku6Xkvb/pvKDmoIfog73lpJ/lnKjlhYPntKDlpJbpg6jnp7vliqjnmoTml7blgJnkuZ/og73lrp7njrDmi5bliqgKICAgICAgICBkb2N1bWVudC5vbm1vdXNlbW92ZSA9IChldikgPT4gewogICAgICAgICAgaWYgKHRoaXMuZHJhZ05vZGVGbGFnKSByZXR1cm4KICAgICAgICAgIHRoaXMuZHJhZyA9IGZhbHNlCiAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpCiAgICAgICAgICAvLyDorqHnrpfmi5bmi73nmoTlgY/np7vot53nprsKICAgICAgICAgIGNvbnN0IGRpc3RhbmNlWCA9IGV2LmNsaWVudFggLSBkaXNYCiAgICAgICAgICBjb25zdCBkaXN0YW5jZVkgPSBldi5jbGllbnRZIC0gZGlzWQoKICAgICAgICAgIGVsLnNjcm9sbFRvKG9yaWdpbmFsU2Nyb2xsTGVmdCAtIGRpc3RhbmNlWCwgb3JpZ2luYWxTY3JvbGxUb3AgLSBkaXN0YW5jZVkpCgogICAgICAgICAgLy8g5Zyo6byg5qCH5ouW5Yqo55qE5pe25YCZ5bCG54K55Ye75LqL5Lu25bGP6JS95o6JCiAgICAgICAgICBlbC5zdHlsZVsncG9pbnRlci1ldmVudHMnXSA9ICdub25lJwogICAgICAgICAgZWwuc3R5bGUuY3Vyc29yID0gJ2dyYWJiaW5nJwogICAgICAgIH0KICAgICAgICBkb2N1bWVudC5vbm1vdXNldXAgPSAoKSA9PiB7CiAgICAgICAgICBpZiAoIXRoaXMuZHJhZ05vZGVGbGFnKSB7CiAgICAgICAgICAgIGVsLnN0eWxlWydzY3JvbGwtYmVoYXZpb3InXSA9IG9yaWdpbmFsU2Nyb2xsQmVoYXZpb3IKICAgICAgICAgICAgZWwuc3R5bGVbJ3BvaW50ZXItZXZlbnRzJ10gPSBvcmlnaW5hbFBvaW50ZXJFdmVudHMKICAgICAgICAgICAgZWwuc3R5bGUuY3Vyc29yID0gJ2dyYWInCiAgICAgICAgICB9CiAgICAgICAgICBkb2N1bWVudC5vbm1vdXNlbW92ZSA9IGRvY3VtZW50Lm9ubW91c2V1cCA9IG51bGwKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmptID0ganNNaW5kLnNob3codGhpcy5vcHRpb25zLCB0aGlzLm1pbmQpCgogICAgLy8g6Ieq5a6a5LmJ5ouW5ou95a6M5oiQ5LqL5Lu2CiAgICBqc01pbmQuZHJhZ2dhYmxlLnByb3RvdHlwZS5oYW5kbGVEcmFnID0gKHNyY05vZGUsIHRhcmdldE5vZGUsIHRhcmdldERpcmVjdCkgPT4gewogICAgICBjb25zdCBuZXh0UGFyZW50SWQgPSBzcmNOb2RlLnBhcmVudC5pZAogICAgICB0aGlzLmhhbmRsZURyb3AobmV4dFBhcmVudElkLCBzcmNOb2RlLmlkKQogICAgfQogICAgdGhpcy5lZGl0b3IgPSB0aGlzLmptLnZpZXcuZV9lZGl0b3IKICAgIHRoaXMuaW5pdCgpCiAgICB0aGlzLm1vdXNlV2hlZWwoKQogICAgdGhpcy5tb3VzZURyYWcoKQogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RvbU1vdXNlU2Nyb2xsJywgdGhpcy5zY3JvbGxGdW5jLCBmYWxzZSkKICB9Cn0K"},{"version":3,"sources":["Jsmind.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Jsmind.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div\n    class=\"jsmind\"\n  >\n    <!-- 右上角菜单 -->\n    <div class=\"toolbar\">\n      <ul class=\"toolbar-list\">\n        <li class=\"item\">\n          <span\n            size=\"16\"\n            class=\"percent\"\n            style=\"font-size: 14px; color: rgb(29, 29, 31)\"\n            @click=\"zoom.value = 100\"\n            >{{ zoom.value }}%\n          </span>\n          <div class=\"scale-slide\">\n            <ul>\n              <li class=\"normal-item\" title=\"Canvas shrink\" @click=\"zoomOut\">\n                <svg\n                  width=\"16\"\n                  height=\"16\"\n                  viewBox=\"0 0 16 16\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    d=\"M12.98 11.95l2.91 2.9c.15.15.15.38 0 .53l-.51.51a.37.37 0 01-.52 0L11.95 13a7.32 7.32 0 111.03-1.03zm-5.66 1.22a5.85 5.85 0 100-11.7 5.85 5.85 0 000 11.7zM4.76 6.6h5.12c.2 0 .37.16.37.36v.73c0 .2-.17.37-.37.37H4.76a.37.37 0 01-.37-.37v-.73c0-.2.16-.36.37-.36z\"\n                    fill=\"#2B2F36\"\n                    fill-rule=\"nonzero\"\n                  ></path>\n                </svg>\n              </li>\n\n              <li class=\"slider\">\n                <el-slider\n                  v-model=\"zoom.value\"\n                  :show-tooltip=\"false\"\n                  :min=\"zoom.min\"\n                  :max=\"zoom.max\"\n                ></el-slider>\n              </li>\n\n              <li class=\"normal-item\" title=\"Canvas zoom\" @click=\"zoomIn\">\n                <svg\n                  width=\"16\"\n                  height=\"16\"\n                  viewBox=\"0 0 16 16\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    d=\"M12.98 11.95l2.91 2.9c.15.15.15.38 0 .53l-.51.51a.37.37 0 01-.52 0L11.95 13a7.32 7.32 0 111.03-1.03zm-6.4-5.36V4.76c0-.2.17-.37.37-.37h.73c.2 0 .37.16.37.37v1.83h1.83c.2 0 .37.16.37.36v.73c0 .2-.17.37-.37.37H8.05v1.83c0 .2-.16.37-.37.37h-.73a.37.37 0 01-.36-.37V8.05H4.76a.37.37 0 01-.37-.37v-.73c0-.2.16-.36.37-.36h1.83zm.74 6.58a5.85 5.85 0 100-11.7 5.85 5.85 0 000 11.7z\"\n                    fill=\"#2B2F36\"\n                    fill-rule=\"nonzero\"\n                  ></path>\n                </svg>\n              </li>\n            </ul>\n          </div>\n        </li>\n\n        \n\n        <div\n          class=\"reset item normal-item\"\n          title=\"Target the central topic\"\n          @click=\"reset\"\n        >\n          <svg\n            width=\"16\"\n            height=\"16\"\n            viewBox=\"0 0 16 16\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M.77 0h3.46c.21 0 .38.17.38.38v.77c0 .22-.17.39-.38.39h-2.7v2.7c0 .2-.16.38-.38.38H.38A.38.38 0 010 4.23V.77C0 .34.34 0 .77 0zm14.45 16h-3.46a.38.38 0 01-.38-.39v-.76c0-.22.17-.39.38-.39h2.7v-2.7c0-.2.17-.38.38-.38h.77c.21 0 .38.18.38.39v3.46c0 .43-.34.77-.77.77zM0 15.23v-3.46c0-.21.17-.39.38-.39h.77c.22 0 .39.18.39.39v2.7h2.69c.21 0 .38.16.38.38v.77c0 .2-.17.38-.38.38H.77a.77.77 0 01-.77-.77zM16 .78v3.46c0 .21-.17.38-.38.38h-.77a.38.38 0 01-.39-.38v-2.7h-2.69a.38.38 0 01-.38-.38V.4c0-.2.17-.38.38-.38h3.46c.43 0 .77.34.77.77zm-8 9.99a2.77 2.77 0 110-5.54 2.77 2.77 0 010 5.54z\"\n              fill=\"#2B2F36\"\n              fill-rule=\"nonzero\"\n            ></path>\n          </svg>\n        </div>\n      </ul>\n    </div>\n\n    <div class=\"top-bar\">\n      <ul class=\"filter\">\n        <li\n          :class=\"[item.type, item.status && 'active']\"\n          @click=\"toggleFilter(item)\"\n          v-for=\"item in filterTypes\"\n          :key=\"item.value\"\n        >\n          <i></i>\n          <span>{{ item.name }}</span>\n        </li>\n      </ul>\n\n      <span class=\"export\" @click=\"screen_shot\">Export picture</span>\n    </div>\n\n    <div class=\"jsmind_layout\">\n      <div\n        id=\"jsmind_container\"\n        ref=\"container\"\n        @click=\"nodeClick\"\n        @contextmenu.prevent.stop=\"nodeClick\"\n      ></div>\n\n      <el-dialog\n        :title=\"createType === 'bro' ? 'add node' : 'add node'\"\n        :visible.sync=\"dialogVisible\"\n        width=\"600px\"\n        @closed=\"form = {}\"\n        :destroy-on-close=\"true\"\n        :lock-scroll=\"false\"\n        :append-to-body=\"true\"\n        v-if=\"selectNodeInfo\"\n      >\n      <!-- selectNodeInfo -->\n        <el-form label-width=\"80px\" class=\"form-con\">\n          <el-form-item label=\"Content\">\n            <el-input\n              type=\"textarea\"\n              :rows=\"2\"\n              v-model=\"selectNodeInfo.Name\"\n              class=\"ele-width\"\n              maxLength=\"64\"\n            ></el-input>\n          </el-form-item>\n        </el-form>\n        <template v-slot:footer>\n          <div class=\"right mr-10\">\n            <el-button\n              type=\"primary\"\n              class=\"common-btn\"\n              @click=\"sureEditNode\"\n              size=\"medium\"\n              >OK</el-button\n            >\n          </div>\n        </template>\n      </el-dialog>\n    </div>\n\n    <!-- 右键菜单 -->\n    <el-menu\n      class=\"context-menu\"\n      v-show=\"showMenu\"\n      :style=\"{\n        left: menuStyle.left,\n        top: menuStyle.top,\n        bottom: menuStyle.bottom,\n        right: menuStyle.right\n      }\"\n      ref=\"context\"\n    >\n      <slot>\n        <el-menu-item @click=\"addChild\">add node</el-menu-item>\n        <el-menu-item @click=\"addChild\">add GPT node</el-menu-item>\n        <el-menu-item @click=\"delCard\">delete</el-menu-item>\n      </slot>\n    </el-menu>\n  </div>\n</template>\n\n<script>\nclass node {\n  constructor(at) {\n    this.type = at\n    this.node_list = new Array()\n  }\n}\nexport default {\n  watch: {\n    'zoom.value'(val) {\n      const zoom = val / 100\n      this.jm.view.setZoom(zoom)\n    },\n    selectTypes(v) {\n      this.loopTreeData(this.mind.data.children, (item) => {\n        if (v.length) {\n          if (v.includes(item.type)) {\n            this.jm.set_node_color(item.id, this.bgMap[item.type].original, '#fff')\n          } else {\n            this.jm.set_node_color(item.id, this.bgMap[item.type].transparent, '#fff')\n          }\n        } else {\n          this.jm.set_node_color(item.id, this.bgMap[item.type].transparent, '#fff')\n        }\n      })\n    }\n  },\n  computed: {\n    pathColor() {\n      return function (type) {\n        return this.structure.active === type ? this.structure.pathActiveColor : this.structure.pathOrginalColor\n      }\n    },\n    rectColor() {\n      return function (type) {\n        return this.structure.active === type ? this.structure.rectActiveColor : this.structure.rectOrginalColor\n      }\n    }\n  },\n  data() {\n    return {\n      node_map: {},  //存放node 树\n      node_id_count: 100,\n      mind: {\n        meta: {\n          name: '思维导图',\n          author: 'pc',\n          version: '0.2'\n        },\n        format: 'node_tree',\n        data: {\n          id: 'root',\n          topic: 'input',\n          type: '1',\n          direction: 'right',\n          children: [\n            {\n              id: 'easy', // [必选] ID, 所有节点的ID不应有重复，否则ID重复的结节将被忽略\n              topic: 'Easy', // [必选] 节点上显示的内容\n              direction: 'right', // [可选] 节点的方向，此数据仅在第一层节点上有效，目前仅支持 left 和 right 两种，默认为 right\n              expanded: true, // [可选] 该节点是否是展开状态，默认为 true\n              type: '2', // [可选]自定义节点类型\n              children: [\n                { id: 'easy1', topic: 'Easy to show', type: '3' },\n                { id: 'easy2', topic: 'Easy to edit', type: '3' },\n                { id: 'easy3', topic: 'Easy to store', type: '3' },\n                { id: 'easy4', topic: 'Easy to embed', type: '3' }\n              ]\n            },\n            {\n              id: 'open',\n              topic: 'Open Source',\n              direction: 'right',\n              expanded: true,\n              type: '2',\n              children: [\n                { id: 'open1', topic: 'on GitHub', type: '3' },\n                { id: 'open2', topic: 'BSD License', type: '3' }\n              ]\n            },\n            {\n              id: 'powerful',\n              topic: 'Powerful',\n              direction: 'right',\n              type: '2',\n              children: [\n                { id: 'powerful1', topic: 'Base on Javascript', type: '3' },\n                { id: 'powerful2', topic: 'Base on HTML5', type: '3' },\n                { id: 'powerful3', topic: 'Depends on you', type: '3' }\n              ]\n            },\n            {\n              id: 'other',\n              topic: 'test node',\n              direction: 'right',\n              type: '2',\n              children: [\n                { id: 'other1', topic: \"I'm from local variable\", type: '3' },\n                { id: 'other2', topic: 'I can do everything', type: '3' }\n              ]\n            }\n          ]\n        }\n      },\n      options: {\n        container: 'jsmind_container', // [必选] 容器的ID\n        editable: true, // [可选] 是否启用编辑\n        theme: '', // [可选] 主题\n        view: {\n          engine: 'canvas', // 思维导图各节点之间线条的绘制引擎\n          hmargin: 120, // 思维导图距容器外框的最小水平距离\n          vmargin: 50, // 思维导图距容器外框的最小垂直距离\n          line_width: 2, // 思维导图线条的粗细\n          line_color: '#ddd' // 思维导图线条的颜色\n        },\n        layout: {\n          hspace: 100, // 节点之间的水平间距\n          vspace: 20, // 节点之间的垂直间距\n          pspace: 20 // 节点与连接线之间的水平间距（用于容纳节点收缩/展开控制器）\n        },\n        shortcut: { // 禁用快捷键\n          enable: false\n        }\n      },\n      zoom: {\n        value: 100, // 层级大小\n        min: 10, // 最小层级\n        max: 400 // 最大层级\n      },\n      bgMap: {\n        1: {\n          original: 'rgb(251, 151, 200)',\n          transparent: 'rgb(251, 151, 200, 0.2)'\n\n        },\n        2: {\n          original: 'rgb(100, 201, 53)',\n          transparent: 'rgb(100, 201, 53, 0.2)'\n        },\n        3: {\n          original: 'rgb(67, 50, 173)',\n          transparent: 'rgb(67, 50, 173, 0.2)'\n        },\n        4: {\n          original: 'rgb(25, 144, 255)',\n          transparent: 'rgb(25, 144, 255, 0.2)'\n        },\n        5: {\n          original: 'rgb(212, 42, 42)',\n          transparent: 'rgb(212, 42, 42, 0.2)'\n        }\n      },\n      structure: {\n        active: 'right',\n        pathOrginalColor: '#2B2F36',\n        pathActiveColor: '#3370FF',\n        rectOrginalColor: '#C3C6CB',\n        rectActiveColor: '#BACEFD'\n      },\n      dialogVisible: false,\n      selectNodeInfo: {\n        id: null,\n        Name: ''\n      }, // 选中节点信息\n      tempNodeInfo: null, // 保存修改之前的信息\n      createType: '', // 添加平级or子级\n      showMenu: false, // 是否显示右键菜单栏\n      menuStyle: {\n        top: '',\n        bottom: '',\n        left: '',\n        right: ''\n      },\n      filterTypes: [\n        {\n          type: 'r',\n          value: '1',\n          name: 'Root',\n          status: true\n        },\n        {\n          type: 'o',\n          value: '2',\n          name: 'Object',\n          status: true\n        },\n        {\n          type: 'ks',\n          value: '3',\n          name: 'Key Steps',\n          status: true\n        },\n        {\n          type: 'p',\n          value: '4',\n          name: 'Programming',\n          status: true\n        },\n        {\n          type: 'c',\n          value: '5',\n          name: 'code',\n          status: true\n        }\n      ],\n      typeQueue: new Set(['1', '2', '3', '4', '5']), // 选中types Set\n      selectTypes: ['1', '2', '3', '4', '5'] // 选中types Array\n    }\n  },\n  methods: {\n    // 筛选树结构\n    toggleFilter(item) {\n      item.status = !item.status\n      item.status ? this.typeQueue.add(item.value) : this.typeQueue.delete(item.value)\n      this.selectTypes = [...this.typeQueue]\n    },\n\n    // 重置视图\n    reset() {\n      document.querySelector('.root').scrollIntoView({\n        block: 'center',\n        behavior: 'smooth'\n      })\n    },\n\n    // 缩小\n    zoomOut() {\n      this.jm.view.zoomOut()\n      this.zoom.value = parseInt(this.jm.view.actualZoom * 100)\n    },\n    // 放大\n    zoomIn() {\n      this.jm.view.zoomIn()\n      this.zoom.value = parseInt(this.jm.view.actualZoom * 100)\n    },\n\n    // 循环树结构\n    loopTreeData(list, callback) {\n      (function doOneFloor(list) {\n        if (Array.isArray(list)) {\n          for (let i = 0; i < list.length; i++) {\n            const item = list[i]\n            callback(item, i)\n            if (item.children && item.children.length > 0) {\n              doOneFloor(item.children)\n            }\n          }\n        }\n      })(list)\n    },\n\n    // 设置背景颜色\n    setColor() {\n      this.jm.set_node_color('root', this.bgMap[1].original, '#fff')\n      this.loopTreeData(this.mind.data.children, (item) => {\n        if (this.selectTypes.length) {\n          if (this.selectTypes.includes(item.type)) {\n            this.jm.set_node_color(item.id, this.bgMap[item.type].original, '#fff')\n          } else {\n            this.jm.set_node_color(item.id, this.bgMap[item.type].transparent, '#fff')\n          }\n        } else {\n          this.jm.set_node_color(item.id, this.bgMap[item.type].transparent, '#fff')\n        }\n      })\n    },\n\n    // 切换思维导图结构\n    toggleStucture(type) {\n      if (this.structure.active === type) return\n      this.structure.active = 'right'\n      switch (type) {\n        case 'side':\n          // 两边分布\n          this.loopTreeData(this.mind.data.children, (item, i) => { item.direction = i % 2 ? 'left' : 'right' })\n          break\n\n        case 'left':\n          // 向左分布\n          this.loopTreeData(this.mind.data.children, (item) => { item.direction = 'left' })\n          break\n\n        case 'right':\n          // 向右分布\n          this.loopTreeData(this.mind.data.children, (item) => { item.direction = 'right' })\n          break\n\n        default:\n          break\n      }\n\n      this.jm.show(this.mind)\n      this.init()\n    },\n\n    // 初始化配置\n    init() {\n\n      this.jm.view.minZoom = 0.1\n      this.jm.view.maxZoom = 5\n      this.jm.expand_all()\n      this.setColor()\n\n      // 重写编辑完成事件\n      this.jm.view.edit_node_end = () => {\n        const node = this.jm.view.get_editing_node()\n        const viewData = node._data.view\n        const element = viewData.element\n        element.style.zIndex = 'auto'\n        if (node.topic === this.editor.value) {\n          this.jm.update_node(node.id, node.topic)\n          return\n        }\n        node.topic = this.editor.value\n        if (!node.topic) {\n          this.$message.info('please input content')\n        }\n        this.jm.update_node(node.id, node.topic)\n\n        // TODO 调接口\n      }\n\n      // 右键菜单\n      this.jm.view.add_event(this.editor, 'contextmenu', (e) => {\n        const selectedNode = this.jm.get_selected_node()\n        console.log(\"selectNode:\" + selectedNode.data.type)\n        //&& selectedNode.data.type\n        if (selectedNode) {\n          e.preventDefault()\n          const el = document.querySelector('.context-menu .el-menu-item')\n          const width = parseFloat(window.getComputedStyle(el).width)\n          const height = parseFloat(window.getComputedStyle(el).height) * 3 + 12\n          const windowHeight = window.innerHeight\n          const windowWidth = window.innerWidth\n\n          // 极限位置 避免越界\n          if (e.clientY + height > windowHeight) {\n            this.menuStyle.left = e.clientX + 'px'\n            this.menuStyle.top = 'unset'\n            this.menuStyle.bottom = 0\n          } else if (e.clientX + width > windowWidth) {\n            this.menuStyle.top = e.clientY + 'px'\n            this.menuStyle.left = 'unset'\n            this.menuStyle.right = 0\n          } else {\n            this.menuStyle.left = e.clientX + 'px'\n            this.menuStyle.top = e.clientY + 'px'\n            this.menuStyle.bottom = 'unset'\n          }\n          this.showMenu = true\n        } else {\n          this.showMenu = false\n        }\n      })\n      this.node_map = new Map([[]]);\n      var root = this.jm.get_root();\n      var root_node = new node(1);\n      this.node_map.set(root.id, root_node);\n    },\n    // 获取选中标签的 ID\n    get_selected_nodeid() {\n      const selectedNode = this.jm.get_selected_node()\n      if (selectedNode) {\n        return selectedNode.id\n      } else {\n        return null\n      }\n    },\n\n    // 保存节点\n    sureEditNode() {\n      if (!this.selectNodeInfo.Name) {\n        this.$message.info('please input content')\n        return\n      }\n\n      if (this.createType === 'bro') {\n        // 平级\n        // TODO \n        // const selectedNode = this.jm.get_selected_node()\n        // const selectedNode_id = selectedNode.id\n        // this.jm.add_node(selectedNode, ++this.node_id_count, this.selectNodeInfo.Name)\n        // // var cur_type = this.node_map.get(selectedNode_id).type\n        // var cur_type = 3\n        // this.jm.set_node_color(this.node_id_count, this.bgMap[cur_type + 1].original, '#fff')\n        // var new_node = new node(cur_type + 1)\n        // this.map.add(this.node_id_count, new_node)\n      } else {\n        // 子级\n        // TODO \n        const selectedNode = this.jm.get_selected_node()\n        const selectedNode_id = selectedNode.id\n        this.jm.add_node(selectedNode, ++this.node_id_count, this.selectNodeInfo.Name, null, 'right')\n        if (this.node_map.get(selectedNode_id)) {\n          let cur_type = this.node_map.get(selectedNode_id).type\n          // var cur_type = 3\n          console.log(\"curtype:\" + this.node_map.get(selectedNode_id))\n        }\n        // let cur_type = this.node_map.get(selectedNode_id).type\n        cur_type = 3\n        this.jm.set_node_color(this.node_id_count, this.bgMap[cur_type + 1].original, '#fff')\n        var new_node = new node(cur_type + 1)\n        this.node_map.set(this.node_id_count, new_node)\n      }\n      this.dialogVisible = false\n    },\n\n    // 拖拽\n    handleDrop(draggingNode, dropNode) {\n      // 前一个兄弟节点\n      const prevNode = this.jm.find_node_before(dropNode)\n      // 获取移动后的node\n      const dragForm = {\n        modelId: '',\n        treeNum: !prevNode ? draggingNode : prevNode.id,\n        thisTreeNum: dropNode\n      }\n      console.log('dragForm', dragForm)\n\n      // TODO 调接口\n    },\n    // 单击重置选中背景颜色\n    nodeClick() {\n      const selectedId = this.get_selected_nodeid()\n      if (!selectedId) return\n      const nodeObj = this.jm.get_node(selectedId)\n      this.jm.set_node_color(selectedId, nodeObj.data['background-color'], '#fff')\n    },\n\n    // 插入卡片\n    insertNode() {\n      const selectedNode = this.jm.get_selected_node()\n      if (selectedNode.data) {\n        this.$emit('insert', selectedNode.data)\n      } else {\n        this.$message.error('please select one node')\n      }\n      this.showMenu = false\n    },\n    // 插入平级\n    addBrother() {\n      const selectedNode = this.jm.get_selected_node()\n      if (selectedNode.data) {\n        this.dialogVisible = true\n        this.selectNodeInfo = {\n          id: selectedNode.data.num,\n          Name: ''\n        }\n        this.createType = 'bro'\n      } else {\n        this.$message.error('please select one node')\n      }\n\n      this.showMenu = false\n    },\n\n    // 插入子级\n    addChild() {\n      const selectedNode = this.jm.get_selected_node()\n      if (selectedNode.data) {\n        this.dialogVisible = true\n        this.selectNodeInfo = {\n          id: selectedNode.data.num,\n          Name: ''\n        }\n        this.createType = 'child'\n      } else {\n        this.$message.error('please select one node')\n      }\n\n      this.showMenu = false\n    },\n\n    // 删除卡片\n    delCard() {\n      const selectedNode = this.jm.get_selected_node()\n      if (selectedNode.data) {\n        // TODO\n        this.jm.remove_node(selectedNode.id)\n        // 获取数据\n        console.log(this.jm.get_data('node_tree'))\n      } else {\n        this.$message.error('please select one node')\n      }\n      this.showMenu = false\n    },\n\n    // 鼠标滚轮放大缩小\n    mouseWheel() {\n      if (document.addEventListener) {\n        document.addEventListener('domMouseScroll', this.scrollFunc, false)\n      }\n      this.$refs.container.onmousewheel = this.scrollFunc\n    },\n    // 滚轮缩放\n    scrollFunc(e) {\n      e = e || window.event\n      if (e.wheelDelta) {\n        if (e.wheelDelta > 0) {\n          this.zoomIn()\n        } else {\n          this.zoomOut()\n        }\n      } else if (e.detail) {\n        if (e.detail > 0) {\n          this.zoomIn()\n        } else {\n          this.zoomOut()\n        }\n      }\n      e.preventDefault()\n      this.jm.resize()\n    },\n\n    // 导出图片\n    screen_shot() {\n      // 去除透明度\n      this.loopTreeData(this.mind.data.children, (item) => this.jm.set_node_color(item.id, this.bgMap[item.type].original, '#fff'))\n      try {\n        this.jm.screenshot.shootDownload()\n      } catch (error) {\n        console.log(error)\n      }\n      setTimeout(() => {\n        this.setColor()\n      }, 1000)\n    },\n    // 鼠标拖拽\n    mouseDrag() {\n      // 里层\n      const el = document.querySelector('.jsmind-inner')\n      // 选中节点\n      let selected\n\n      el.onmousedown = (ev) => {\n        // 选中节点\n        selected = this.jm.get_selected_node()\n        // 标识 是否拖拽节点 避免冲突\n        this.dragNodeFlag = !!selected\n\n        const disX = ev.clientX\n        const disY = ev.clientY\n        const originalScrollLeft = el.scrollLeft\n        const originalScrollTop = el.scrollTop\n        const originalScrollBehavior = el.style['scroll-behavior']\n        const originalPointerEvents = el.style['pointer-events']\n        // auto: 默认值，表示滚动框立即滚动到指定位置。\n        el.style['scroll-behavior'] = 'auto'\n        // 鼠标移动事件是监听的整个document，这样可以使鼠标能够在元素外部移动的时候也能实现拖动\n        document.onmousemove = (ev) => {\n          if (this.dragNodeFlag) return\n          this.drag = false\n          ev.preventDefault()\n          // 计算拖拽的偏移距离\n          const distanceX = ev.clientX - disX\n          const distanceY = ev.clientY - disY\n\n          el.scrollTo(originalScrollLeft - distanceX, originalScrollTop - distanceY)\n\n          // 在鼠标拖动的时候将点击事件屏蔽掉\n          el.style['pointer-events'] = 'none'\n          el.style.cursor = 'grabbing'\n        }\n        document.onmouseup = () => {\n          if (!this.dragNodeFlag) {\n            el.style['scroll-behavior'] = originalScrollBehavior\n            el.style['pointer-events'] = originalPointerEvents\n            el.style.cursor = 'grab'\n          }\n          document.onmousemove = document.onmouseup = null\n        }\n      }\n    }\n  },\n  mounted() {\n    this.jm = jsMind.show(this.options, this.mind)\n\n    // 自定义拖拽完成事件\n    jsMind.draggable.prototype.handleDrag = (srcNode, targetNode, targetDirect) => {\n      const nextParentId = srcNode.parent.id\n      this.handleDrop(nextParentId, srcNode.id)\n    }\n    this.editor = this.jm.view.e_editor\n    this.init()\n    this.mouseWheel()\n    this.mouseDrag()\n  },\n  beforeDestroy() {\n    document.removeEventListener('domMouseScroll', this.scrollFunc, false)\n  }\n}\n</script>\n\n<style lang=\"less\">\n@import '../assets/css/style.less';\n</style>\n"]}]}